\section{Introduction}

\begin{exercise}
	Recall that the number of $k$-subsets of $[n]$ is $\binom{n}{k}$. Given a $k$-subset $S = \{x_1,\ldots,x_k\}$ of $[n]$, we write $S_< = \{x_1,\ldots,x_k\}_<$ to denote that $x_1<x_2<\cdots<x_k$. Determine the number of $k$-subsets $\{x_1,\ldots,x_k\}_<$ of $[n]$ such that $x_i \cong i \mod 2$.
\end{exercise}
For example, for $n=6$ and $k=3$, we have the subsets $\{1,4,5\},\{1,2,3\},\{1,2,5\},\{3,4,5\}$.


Broadly, there are three types of ``answers'': a formula, a recurrence, and a generating function. A great example of the second and third is the following.\\
% Euler's Theorem
$p(n)$, the number of number partitions of $n$, is given by the generating function
\[ \sum_{n \ge 0} p(n) x^n = \prod_{i \ge 1} \frac{1}{1-x^i}. \]
Using this, a recursion may be obtained as well.
We do \emph{not} plug in values for $x$ in the above. We merely look at the coefficient of $x^n$ in it. We want the coefficient to be a finite sum for all $n$. If it is an infinite sum, convergence issues may arise.

% www.math.iitb.ac.in/~krishnan/phd-2022/

% The number of derangements of $[n]$ is the integer closest to $n!/e$.
% Bell number B_n (number of set partitions of $[n]$) : \sum_{n \ge 0} B_n x^n / n! = e^{e^x - 1}.

\subsection{Counting in \texorpdfstring{$\mathfrak{S}_n$}{Sn}}

	Recall that $\mathfrak{S}_n$ is generated by transpositions. A transposition $(i,j)$ is a permutation $\sigma$ defined by
	\[ \sigma(k) = \begin{cases} j, & k=i, \\ i, & k=j, \\ k, & \text{otherwise.} \end{cases} \]
	In fact, $\mathfrak{S}_n$ is generated by the set of just ``adjacent transpositions'' $S_i = (i,i+1)$ for $1 \le i < n$.
	We have
	\begin{align*}
		S_i^2 &= \Id \\
		S_i S_{i+1} S_i &= S_{i+1} S_i S_{i+1} \\
		S_i S_j &= S_j S_i \text{ if $|i-j| > 2$.}
	\end{align*}


	\begin{fdef}
		Given a permutation $\pi \in \mathfrak{S}_n$, define the \emph{length} $\ell(\pi)$ of $\pi$ to be the smallest $k$ such that there exist adjacent transpositions $\sigma_1,\cdots,\sigma_k$ such that $\pi = \sigma_1\cdots\sigma_k$.
	\end{fdef}

	\begin{fprop}
		Consider the \emph{inversion number} $\inv(\pi)$ of a permutation, defined by
		\[ \inv(\pi) = \left|\{ 1 \le i \le j \le n : \pi_i > \pi_j \}\right|. \]
		Then, $\ell(\pi) = \inv(\pi)$.
	\end{fprop}

	\begin{fdef}
		The \emph{sign} of a permutation $\pi$ is defined by $\sign(\pi) = (-1)^{\inv(\pi)}$. Equivalently,
		\[ \sign(\pi) = \frac{\prod_{1 \le i < j \le n} (x_{pi_i} - x_{\pi_j})}{\prod_{1 \le i < j \le n} (x_i - x_j)}. \]
	\end{fdef}

	% LATER, STUDY NUMBER OF ``REDUCED'' PRODUCTS? (NUMBER OF WAYS IN WHICH PI CAN BE WRITTEN AS A PRODUCT OF L(PI) ADJ TRANSPOSITIONS)


	It is straightforward to see that for all $\pi \in \mathfrak{S}_n$, $0 \le \inv(\pi) \le \binom{n}{2}$.
	\begin{fprop}
		\label{prop: inv n}
		Consider $\inv_n(q) = \sum_{\pi \in \mathfrak{S}_n} q^{\inv(\pi)}$. Then,
		\[ \inv_n(q) = \prod_{1 \le m \le n} [n]_q, \]
		where
		\[ [m]_q = \begin{cases} 1 + q + \cdots + q^{m-1}, & m \ge 1, \\ 0, & m = 0. \end{cases} \]
	\end{fprop}
	This quantity $[m]_q$ is called the $q$-analogue of $m$, and similarly, the $q$-analogue of $n!$ is $\prod_{i=1}^n [m]_q$ (this is slightly vague).
	Note in particular that $n! = \inv_n(1)$.
	\begin{proof}
		We prove this by induction. It is easily verified for $n = 2$.\\
		Take $\sigma \in \mathfrak{S}_{n-1}$. There are $n$ ``gaps'' where $n$ can be ``placed'' in $\sigma$ to get a permutation in $\mathfrak{S}_n$. If we place it in the $i$th position from the end (for $0 \le i \le n-1$), the inversion number of the newly obtained permutation is $i$ more than the inversion number of $\sigma$.\\
		As a result,
		\[ \inv_n(q) = \inv_{n-1}(q) + q \inv_{n-1}(q) + q^2 \inv_{n-1}(q) + \cdots + q^{n-1} \inv_{n-1}(q) = [n]_q \inv_{n-1}(q), \]
		where the $q^i \inv_{n-1}(q)$ term corresponds to the case where $n$ is placed in the $i$th position from the end. The required follows by the inductive hypothesis.
	\end{proof}

	\begin{definition}[Descent]
		For $\pi \in \mathfrak{S}_n$, define the \emph{descents} $\DES(\pi) = \{i \in [n-1] : \pi_i > \pi_{i+1}\}$, $\des(\pi) = |\DES(\pi)|$, and $\maj(\pi) = \sum_{i \in \DES(\pi)} i$. 
	\end{definition}
	There are central limit theorems for many of these parameters, which we shall not study.\\
	A permutation $\pi$ has $\des(\pi) + 1$ many ``increasing runs''.

	For example, for the permutation $\pi = (5,1,2,6,4,3) \in \mathfrak{S}_6$, $\DES(\pi) = \{1,4,5\}$, $\des(\pi) = 3$, and $\maj(\pi) = 10$.

	\begin{fprop}
		\label{prop: maj n}
		The distribution of $\maj(\pi)$ over $\mathfrak{S}_n$ is the same as that of $\inv(\pi)$. Equivalently,
		\[ \maj_n(q) = \sum_{\pi \in \mathfrak{S}_n} q^{\maj(\pi)} = \prod_{m=1}^n [m]_q = \inv_n(q). \] 
	\end{fprop}
	This result took nearly 50 years to prove!
	\begin{proof}
		The strategy is similar to that of \Cref{prop: inv n}. Let $\pi \in \mathfrak{S}_{n-1}$. As before, there are $n$ positions to insert $n$.
		% An insertion increases $\maj$ (compared to $\pi$) only if it is placed in the middle of an increasing run. That is, we must place it  Further, in this case, it increases $\des$ by $1$. What is the sum of $\maj$ increases over all possible insertions? 
		\begin{itemize}
			\item Label the positions of descents of $\sigma$ and the last position from right ot left as $0,1,\ldots,\des(\pi)$.
			\item Label the remaining positions from left to right as $\des(\pi)+1,\ldots,n-1$.
		\end{itemize}
		We claim that inserting $n$ at a position increases $\maj$ by the labelled amount.\\
		If inserted anywhere, all the descent positions starting from there increase by $1$. This explains why the increase is equal to the labelled quantity for positions that are descents, since no new descents are introduced. In the case where we insert it in a position of non-descent, we further introduce a new descent at the position of insertion of $n$, which explains why the increase is equal tot he labelled quantity for positions that are not descents.\\
		The remainder of the proof is identical to that of \Cref{prop: inv n}, since the increases are in bijection with $[n-1]_0$.
	\end{proof}



	% PRESENT PROOF OF THE FIRST ON TUESDAY -- 02/08/2022